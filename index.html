<!DOCTYPE html>
<html lang="en" class="scroll-smooth">
<!--
    ================================================================================================
    INTERACTIVE GTM BLUEPRINT SERIES - SINGLE PAGE APPLICATION (SPA)
    ================================================================================================
    
    PROJECT EVOLUTION:
    This file represents the evolution from a 3-file system to a unified Single Page Application.
    
    ORIGINAL ARCHITECTURE (3 files):
    1. positioning.html - Standalone page for Part 1: ICP & Positioning
    2. category_design.html - Standalone page for Part 2: Category Design  
    3. index.html - Simple landing page with links to the two tools
    
    CURRENT ARCHITECTURE (1 file):
    - index.html (this file) - Complete SPA containing all functionality:
      * Home page with navigation cards
      * Full Positioning Tool (Part 1)
      * Full Category Design Tool (Part 2)
      * Unified state management with localStorage persistence
      * Seamless navigation between all views
      * Consistent branding and user experience
    
    WHY THE CHANGE:
    1. Better User Experience - No page reloads, instant navigation, persistent state
    2. Code Reusability - Shared components, consistent styling, DRY principles
    3. Maintainability - Single source of truth, no duplicate code to sync
    4. State Management - Data flows seamlessly between tools using React state
    5. Modern Architecture - Follows current web development best practices
    
    TECHNICAL APPROACH:
    - React 18 with CDN loading (no build process required)
    - Babel standalone for JSX transformation in the browser
    - Tailwind CSS for styling
    - localStorage for data persistence
    - Component-based architecture with shared state
    
    NOTE: The original positioning.html and category_design.html files have been archived
    in the /archive directory for reference, but are no longer needed or maintained.
    ================================================================================================
-->
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Interactive GTM Blueprint Series</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script crossorigin src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Outfit:wght@400;500;700&family=Work+Sans:wght@700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Outfit', sans-serif;
            background-color: #f6f6f6;
        }
        h1, h2, h3, button {
            font-family: 'Work Sans', sans-serif;
        }
        .scale-gold-text { color: #e5a819; }
        .scale-gold-bg { background-color: #e5a819; }
        .scale-gold-border { border-color: #e5a819; }
        .scale-green-text { color: #224f41; }
        .scale-green-bg { background-color: #224f41; }
        .nav-card {
            transition: transform 0.2s ease-in-out, box-shadow 0.2s ease-in-out;
        }
        .nav-card:hover {
            transform: translateY(-0.5rem);
            box-shadow: 0 20px 25px -5px rgb(0 0 0 / 0.1), 0 8px 10px -6px rgb(0 0 0 / 0.1);
        }
        .nav-link {
            transition: all 0.2s ease-in-out;
        }
        .nav-link:hover {
            background-color: #faeed1;
            color: #224f41;
        }
        .nav-link.active {
            background-color: #e5a819;
            color: #224f41;
            font-weight: 700;
        }
        .nav-link.active:hover {
            background-color: #faeed1;
            color: #224f41;
        }
        textarea, input[type="text"] {
            font-family: 'Outfit', sans-serif;
            transition: border-color 0.2s ease-in-out, box-shadow 0.2s ease-in-out;
        }
        textarea:focus, input[type="text"]:focus {
            border-color: #e5a819;
            box-shadow: 0 0 0 2px rgba(229, 168, 25, 0.4);
            outline: none;
        }
        .progress-bar-fill {
            transition: width 0.5s ease-in-out;
        }
        /* Ensure sticky header works properly */
        .sticky-header {
            position: sticky;
            top: 0;
            z-index: 40;
            background: white;
            box-shadow: 0 4px 6px -1px rgb(0 0 0 / 0.1), 0 2px 4px -2px rgb(0 0 0 / 0.1);
        }
        /* Sticky section headers */
        .sticky-section-header {
            position: sticky;
            top: 0;
            background: white;
            z-index: 30;
            padding: 16px 0;
            margin-bottom: 8px;
            border-bottom: 1px solid #e5e7eb;
        }
    </style>
</head>
<body class="text-gray-800">
    <div id="root"></div>

    <script type="text/babel">
        /*
         * ============================================================================================ 
         * REACT SINGLE PAGE APPLICATION IMPLEMENTATION
         * ============================================================================================ 
         * 
         * This React application consolidates what was previously three separate HTML files:
         * 1. A simple index.html with navigation links
         * 2. positioning.html for the ICP & Positioning tool
         * 3. category_design.html for the Category Design tool
         * 
         * KEY COMPONENTS:
         * - HomeView: Landing page with navigation cards (replaces old index.html content)
         * - PositioningTool: Complete Part 1 functionality (replaces positioning.html)
         * - CategoryDesignTool: Complete Part 2 functionality (replaces category_design.html)
         * - App: Main component that manages routing and global state
         * 
         * STATE MANAGEMENT:
         * - All form data is stored in a unified appState object
         * - State persists to localStorage automatically on changes
         * - Data flows seamlessly between tools (e.g., ICP data appears in Category Design)
         * 
         * BENEFITS OVER 3-FILE SYSTEM:
         * - No data loss when navigating between tools
         * - Consistent UI/UX across all views
         * - Single codebase to maintain
         * - Better performance (no full page reloads)
         * - Easier to add new features that span multiple tools
         * ============================================================================================ 
         */
        
        const { useState, useEffect, useRef } = React;

        // localStorage helper functions
        const saveAppState = (state) => {
          try {
            const stateWithTimestamp = {
              ...state,
              lastSaved: new Date().toISOString()
            };
            localStorage.setItem('klarityGTMBlueprintState', JSON.stringify(stateWithTimestamp));
          } catch (error) {
            console.error("Could not save state to localStorage", error);
          }
        };

        const loadAppState = () => {
          try {
            const savedState = localStorage.getItem('klarityGTMBlueprintState');
            if (!savedState) return null;
            
            const parsedState = JSON.parse(savedState);
            
            // Validate state structure - check for required top-level properties
            if (parsedState && 
                typeof parsedState === 'object' && 
                parsedState.hasOwnProperty('positioningData') && 
                parsedState.hasOwnProperty('categoryData')) {
              return parsedState;
            }
            
            // Invalid structure - return null to use default state
            return null;
          } catch (error) {
            console.error("Could not load state from localStorage", error);
            return null;
          }
        };

        // Format timestamp for display
        const formatLastSaved = (isoString) => {
          if (!isoString) return null;
          try {
            const date = new Date(isoString);
            return date.toLocaleTimeString('en-US', { 
              hour: 'numeric', 
              minute: '2-digit',
              hour12: true 
            });
          } catch (error) {
            return null;
          }
        };

        // Initial state structure
        const getInitialState = () => ({
          positioningData: {
            icp_common_needs: '',
            icp_desired_business_value: '',
            icp_problem_urgency: '',
            icp_quick_decision_making: '',
            icp_prioritized_requirements: '',
            icp_willingness_to_pay: '',
            icp_implementation_readiness: '',
            icp_firmographic: '',
            icp_technographic: '',
            icp_behavioral: '',
            icp_summary: '',
            'market-context': '',
            'market-context-other': '',
            alternatives: [{ val1: '', val2: '' }],
            values: [{ val1: '', val2: '', val3: '' }],
            trend1_desc: '',
            trend2_desc: '',
            trend3_desc: '',
            trend4_desc: ''
          },
          categoryData: {
            'from-statement': '',
            'to-statement': '',
            'new-opportunity': '',
            'category-name': '',
            'category-definition': '',
            'manifesto': ''
          },
          currentView: 'home'
        });

        // Home Component
        const Home = ({ onNavigate }) => (
            <div className="container mx-auto px-4 sm:px-6 lg:px-8">
                <div className="min-h-screen flex flex-col items-center justify-center">
                    <header className="text-center mb-12">
                        <h1 className="text-4xl md:text-5xl font-bold scale-green-text">Interactive GTM Blueprint Series</h1>
                        <p className="mt-4 text-lg text-gray-600 max-w-2xl mx-auto">A hands-on workshop to define your market position and design your category. Select a module to begin.</p>
                    </header>

                    <main className="w-full max-w-4xl">
                        <div className="grid grid-cols-1 md:grid-cols-2 gap-8">
                            <div 
                                onClick={() => onNavigate('positioning')}
                                className="nav-card bg-white rounded-xl shadow-lg p-8 cursor-pointer text-left group"
                            >
                                <div className="mb-4">
                                    <span className="scale-gold-bg scale-green-text text-xs font-bold font-work-sans px-3 py-1 rounded-full">Part 1</span>
                                </div>
                                <h2 className="text-2xl font-bold scale-green-text mb-2">ICP & Positioning Blueprint</h2>
                                <p className="text-gray-600 mb-6">Define your ideal customer, analyze the market, and nail your unique value proposition to build a solid foundation for growth.</p>
                                <div className="font-bold scale-green-text group-hover:scale-gold-text transition-colors">
                                    Start Positioning Workshop →
                                </div>
                            </div>

                            <div 
                                onClick={() => onNavigate('category')}
                                className="nav-card bg-white rounded-xl shadow-lg p-8 cursor-pointer text-left group"
                            >
                                <div className="mb-4">
                                    <span className="scale-gold-bg scale-green-text text-xs font-bold font-work-sans px-3 py-1 rounded-full">Part 2</span>
                                </div>
                                <h2 className="text-2xl font-bold scale-green-text mb-2">Category Design Blueprint</h2>
                                <p className="text-gray-600 mb-6">Use your positioning foundation to forge a new category, build a provocative market narrative, and establish yourself as the leader.</p>
                                <div className="font-bold scale-green-text group-hover:scale-gold-text transition-colors">
                                    Start Category Workshop →
                                </div>
                            </div>
                        </div>
                    </main>

                    <p className="text-sm text-gray-500 mt-8 text-center max-w-2xl mx-auto">
                        Your progress is saved automatically in your browser. This data is private and is not sent to any server.
                    </p>

                    <footer className="text-center text-sm text-gray-500 py-8 mt-12">
                        Scale Venture Partners
                    </footer>
                </div>
            </div>
        );

        // Export Modal Component
        const ExportModal = ({ isOpen, onClose, title, content, appState, filename = 'gtm-blueprint-export' }) => {
            const [copied, setCopied] = useState(false);

            const handleCopy = () => {
                navigator.clipboard.writeText(content).then(() => {
                    setCopied(true);
                    setTimeout(() => setCopied(false), 2000);
                }).catch(err => {
                    console.error('Failed to copy text: ', err);
                });
            };

            const handleDownloadJSON = () => {
                const jsonData = JSON.stringify(appState, null, 2);
                const blob = new Blob([jsonData], { type: 'application/json' });
                const url = URL.createObjectURL(blob);
                const a = document.createElement('a');
                a.href = url;
                a.download = `${filename}.json`;
                document.body.appendChild(a);
                a.click();
                document.body.removeChild(a);
                URL.revokeObjectURL(url);
            };

            if (!isOpen) return null;

            return (
                <div className="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4">
                    <div className="bg-white rounded-lg shadow-2xl w-full max-w-3xl max-h-[90vh] flex flex-col">
                        <div className="flex justify-between items-center p-4 border-b">
                            <h2 className="text-2xl font-bold scale-green-text">{title}</h2>
                            <button onClick={onClose} className="text-gray-400 hover:text-gray-800 text-3xl font-light">×</button>
                        </div>
                        <div className="p-6 overflow-y-auto">
                            <pre className="whitespace-pre-wrap text-sm bg-gray-50 p-4 rounded-md font-mono">{content}</pre>
                        </div>
                        <div className="p-4 border-t bg-gray-50 flex justify-end space-x-3">
                            <button 
                                onClick={handleDownloadJSON}
                                className="border border-gray-300 text-gray-600 font-bold py-2 px-4 rounded-lg hover:bg-gray-50 transition-colors"
                            >
                                Download JSON
                            </button>
                            <button 
                                onClick={handleCopy}
                                className="scale-green-bg text-white font-bold py-2 px-4 rounded-lg hover:bg-opacity-90"
                            >
                                {copied ? 'Copied!' : 'Copy to Clipboard'}
                            </button>
                        </div>
                    </div>
                </div>
            );
        };

        // Dynamic Field Components
        const RemovableRow = ({ index, item, onUpdate, onRemove, placeholder1, placeholder2 }) => (
            <div className="flex items-center space-x-2">
                <input 
                    type="text" 
                    className="w-1/2 p-2 border border-gray-300 rounded-md focus-ring-gold"
                    placeholder={placeholder1}
                    value={item.val1}
                    onChange={(e) => onUpdate(index, 'val1', e.target.value)}
                />
                <textarea 
                    className="w-1/2 p-2 border border-gray-300 rounded-md focus-ring-gold"
                    rows="3" 
                    placeholder={placeholder2}
                    value={item.val2}
                    onChange={(e) => onUpdate(index, 'val2', e.target.value)}
                ></textarea>
                <button 
                    onClick={() => onRemove(index)}
                    className="text-gray-400 hover:text-red-600 font-bold text-2xl transition-colors"
                >
                    ×
                </button>
            </div>
        );

        const RemovableInput = ({ index, item, onUpdate, onRemove, placeholder }) => (
            <div className="flex items-center space-x-2">
                <input 
                    type="text" 
                    className="w-full p-2 border border-gray-300 rounded-md focus-ring-gold"
                    placeholder={placeholder}
                    value={item.value}
                    onChange={(e) => onUpdate(index, 'value', e.target.value)}
                />
                <button 
                    onClick={() => onRemove(index)}
                    className="text-gray-400 hover:text-red-600 font-bold text-2xl transition-colors"
                >
                    ×
                </button>
            </div>
        );

        const RemovableTriple = ({ index, item, onUpdate, onRemove }) => (
            <div className="p-4 border border-gray-200 rounded-lg space-y-3 bg-gray-50">
                <div className="flex items-start space-x-2">
                    <div className="flex-grow">
                        <label className="block text-sm font-semibold text-gray-700 mb-1">
                            Attribute: The Feature or Capability
                        </label>
                        <input 
                            type="text" 
                            className="w-full p-2 border border-gray-300 rounded-md focus-ring-gold"
                            placeholder="Example: Day-one insights from existing documents"
                            value={item.val1}
                            onChange={(e) => onUpdate(index, 'val1', e.target.value)}
                        />
                    </div>
                    <button 
                        onClick={() => onRemove(index)}
                        className="mt-6 text-gray-400 hover:text-red-600 font-bold text-2xl transition-colors"
                    >
                        ×
                    </button>
                </div>
                <div>
                    <label className="block text-sm font-semibold text-gray-700 mb-1">
                        Benefit: What the attribute enables for a customer
                    </label>
                    <textarea 
                        className="w-full p-2 border border-gray-300 rounded-md focus-ring-gold"
                        rows="2" 
                        placeholder="Example: Enables immediate analysis without lengthy discovery interviews"
                        value={item.val2}
                        onChange={(e) => onUpdate(index, 'val2', e.target.value)}
                    ></textarea>
                </div>
                <div>
                    <label className="block text-sm font-semibold text-gray-700 mb-1">
                        Value: How the attribute maps to a goal the customer is trying to achieve
                    </label>
                    <input 
                        type="text" 
                        className="w-full p-2 border border-gray-300 rounded-md focus-ring-gold"
                        placeholder="Example: Reduces transformation timeline by 6 months, saving $500k in consulting fees"
                        value={item.val3}
                        onChange={(e) => onUpdate(index, 'val3', e.target.value)}
                    />
                </div>
                <div className="pt-2">
                    <button 
                        className="text-sm font-bold py-2 px-3 rounded-lg transition-colors bg-gray-200 hover:bg-gray-300 text-gray-700"
                    >
                        Grade Proposition
                    </button>
                </div>
            </div>
        );

        // PositioningTool Component
        const PositioningTool = ({ appState, setAppState, onNavigate }) => {
            const [exportModal, setExportModal] = useState({ isOpen: false, content: '', title: '' });
            const [jtbdExpanded, setJtbdExpanded] = useState(false);

            const updateNestedValue = (section, index, key, value) => {
                const newData = { ...appState.positioningData };
                if (!newData[section]) newData[section] = [];
                if (!newData[section][index]) newData[section][index] = {};
                newData[section][index][key] = value;
                setAppState(prev => ({ ...prev, positioningData: newData }));
            };

            const addItem = (section, template) => {
                const newData = { ...appState.positioningData };
                if (!newData[section]) newData[section] = [];
                newData[section].push(template);
                setAppState(prev => ({ ...prev, positioningData: newData }));
            };

            const removeItem = (section, index) => {
                const newData = { ...appState.positioningData };
                if (newData[section]) {
                    newData[section].splice(index, 1);
                    setAppState(prev => ({ ...prev, positioningData: newData }));
                }
            };

            const handleExport = () => {
                const formatSection = (title, content) => `## ${title}\n${content || 'N/A'}\n\n`;
                const formatList = (items, k1, k2) => items.map(item => `- ${item[k1]}: ${item[k2]}`).join('\n');
                
                let summary = `Part 1: ICP & Positioning Blueprint\n======================================\n\n`;
                summary += `## 1. Ideal Customer Profile (ICP)\n`;
                summary += `- Common Needs: ${appState.positioningData.icp_common_needs || 'N/A'}\n`;
                summary += `- Desired Business Value: ${appState.positioningData.icp_desired_business_value || 'N/A'}\n`;
                summary += `- Problem Urgency: ${appState.positioningData.icp_problem_urgency || 'N/A'}\n`;
                summary += `- Quick Decision Making: ${appState.positioningData.icp_quick_decision_making || 'N/A'}\n`;
                summary += `- Prioritized Requirements: ${appState.positioningData.icp_prioritized_requirements || 'N/A'}\n`;
                summary += `- Willingness to Pay: ${appState.positioningData.icp_willingness_to_pay || 'N/A'}\n`;
                summary += `- Implementation Readiness: ${appState.positioningData.icp_implementation_readiness || 'N/A'}\n`;
                summary += `- Firmographic: ${appState.positioningData.icp_firmographic || 'N/A'}\n`;
                summary += `- Technographic: ${appState.positioningData.icp_technographic || 'N/A'}\n`;
                summary += `- Behavioral: ${appState.positioningData.icp_behavioral || 'N/A'}\n\n`;

                summary += formatSection('2. Competitive Alternatives', appState.positioningData.alternatives ? formatList(appState.positioningData.alternatives, 'val1', 'val2') : 'N/A');
                summary += formatSection('5. Summarize Target Market', appState.positioningData.icp_summary || 'N/A');
                let marketContext = appState.positioningData['market-context'] === 'Other' ? appState.positioningData['market-context-other'] : appState.positioningData['market-context'];
                summary += formatSection('6. Market Context (Today)', marketContext);
                let trendsContent = '';
                if (appState.positioningData.trend1_desc) trendsContent += `- Industry Trend 1: ${appState.positioningData.trend1_desc}\n`;
                if (appState.positioningData.trend2_desc) trendsContent += `- Industry Trend 2: ${appState.positioningData.trend2_desc}\n`;
                if (appState.positioningData.trend3_desc) trendsContent += `- Industry Trend 3: ${appState.positioningData.trend3_desc}\n`;
                if (appState.positioningData.trend4_desc) trendsContent += `- Industry Trend 4: ${appState.positioningData.trend4_desc}\n`;
                summary += formatSection('7. Relevant Trends', trendsContent || 'N/A');

                setExportModal({ isOpen: true, content: summary, title: 'Positioning Summary' });
            };

            return (
                <div className="container mx-auto px-4 sm:px-6 lg:px-8 min-h-screen pb-16">
                    <header className="sticky-header">
                        <div className="flex justify-between items-center py-3">
                            <div className="flex items-center space-x-4">
                                <button onClick={() => onNavigate('home')} className="text-gray-600 hover:scale-gold-text">← Back to Home</button>
                                <h1 className="text-xl sm:text-2xl font-bold scale-green-text">Part 1: ICP & Positioning</h1>
                            </div>
                            <div className="flex items-center space-x-2">
                                <button
                                    onClick={() => {
                                        if (window.confirm("Are you sure you want to reset all data for Part 1? This will clear all ICP and Positioning fields.")) {
                                            setAppState(prev => ({
                                                ...prev,
                                                positioningData: getInitialState().positioningData
                                            }));
                                        }
                                    }}
                                    className="bg-gray-200 text-gray-700 font-semibold py-2 px-4 rounded-lg hover:bg-gray-300 text-sm"
                                >
                                    Reset
                                </button>
                                <button onClick={handleExport} className="scale-green-bg text-white font-bold py-2 px-4 rounded-lg hover:bg-opacity-90">Export</button>
                            </div>
                        </div>
                    </header>

                    <div className="mt-8">
                        <div className="lg:flex lg:space-x-8">
                            <nav className="hidden lg:block w-1/4 sticky top-28 self-start">
                                <div className="bg-white p-4 rounded-lg shadow-md">
                                    <h3 className="font-bold scale-green-text mb-2 text-lg">Sections</h3>
                                    <ul className="space-y-1">
                                        <li><a href="#section-1" className="nav-link block p-2 rounded text-gray-700 font-semibold">1. Define Your ICP</a></li>
                                        <li><a href="#section-2" className="nav-link block p-2 rounded text-gray-700 font-semibold">2. Competitive Alternatives</a></li>
                                        <li><a href="#section-4" className="nav-link block p-2 rounded text-gray-700 font-semibold">4. Value and Proof</a></li>
                                        <li><a href="#section-7" className="nav-link block p-2 rounded text-gray-700 font-semibold">7. Relevant Trends</a></li>
                                    </ul>
                                    <div className="mt-4 pt-4 border-t">
                                        <button onClick={() => onNavigate('category')} className="text-sm text-gray-600 hover:scale-gold-text font-semibold w-full text-left">
                                            Continue to Part 2 →
                                        </button>
                                    </div>
                                </div>
                            </nav>

                            <main className="w-full lg:w-3/4">
                                <div className="space-y-8">
                        <div id="section-1" className="bg-white p-8 rounded-lg shadow-md scroll-mt-24">
                            <h2 className="text-2xl font-bold scale-green-text mb-2">1. Define Your Ideal Customer Profile (ICP)</h2>
                            <p className="text-gray-600 mb-6">This is the foundation. A precise ICP provides the lens through which all other positioning elements are viewed. Be specific and use data where possible.</p>
                            <div className="space-y-6">
                                <div>
                                    <div className="flex items-center justify-between mb-2">
                                        <label className="block font-bold text-gray-700">
                                            Common Needs (Job-to-be-Done)
                                        </label>
                                        <button 
                                            onClick={() => setJtbdExpanded(!jtbdExpanded)}
                                            className="text-blue-500 text-sm hover:text-blue-700 font-medium flex items-center gap-1"
                                        >
                                            <span className={`transition-transform ${jtbdExpanded ? 'rotate-90' : ''}`}>▶</span>
                                            {jtbdExpanded ? 'Hide guide' : 'Show guide'}
                                        </button>
                                    </div>
                                    
                                    {jtbdExpanded && (
                                        <div className="mb-4 p-4 bg-blue-50 border border-blue-200 rounded-lg">
                                            <h4 className="font-bold mb-2 text-blue-900">8 Elements of a JTBD:</h4>
                                            <ul className="list-disc pl-4 text-sm space-y-1 text-blue-800">
                                                <li><b>Context:</b> What's going on in the person's life.</li>
                                                <li><b>Struggling Moments:</b> Realization that something can be better.</li>
                                                <li><b>Pushes and Pulls:</b> Forces for and against change.</li>
                                                <li><b>Anxieties and Habits:</b> Concerns about the new and attachment to the old.</li>
                                                <li><b>Desired Outcomes:</b> The vision for a better future.</li>
                                                <li><b>Hiring/Firing Criteria:</b> What the solution must do, and what it must not do.</li>
                                                <li><b>Key Trade-offs:</b> What the person is willing to give up.</li>
                                                <li><b>Basic Quality:</b> The essential things the job requires.</li>
                                            </ul>
                                            <a href="https://therewiredgroup.com/learn/complete-guide-jobs-to-be-done/" target="_blank" rel="noopener noreferrer" className="text-blue-600 hover:underline text-sm block mt-3">
                                                Learn more about Jobs-to-be-Done →
                                            </a>
                                        </div>
                                    )}
                                    
                                    <p className="text-sm text-gray-500 mb-2">What specific, high-stakes task are they trying to accomplish?</p>
                                    <textarea 
                                        className="w-full mt-1 p-2 border border-gray-300 rounded-md"
                                        rows="3" 
                                        placeholder="Example: We need to de-risk a critical NetSuite to Oracle ERP migration by getting an accurate 'as-is' of all current business processes."
                                        value={appState.positioningData.icp_common_needs || ''}
                                        onChange={(e) => setAppState(prev => ({ ...prev, positioningData: { ...prev.positioningData, icp_common_needs: e.target.value } }))}
                                    />
                                </div>
                                <div>
                                    <label className="block font-bold text-gray-700">Desired Business Value</label>
                                    <p className="text-sm text-gray-500 mb-2">How do they measure success? What are their core metrics?</p>
                                    <textarea 
                                        className="w-full mt-1 p-2 border border-gray-300 rounded-md"
                                        rows="3" 
                                        placeholder="Example: Success is measured by (1) reducing the migration timeline by at least 50%, (2) cutting external consulting fees by $500k+, and (3) zero critical process failures post-launch."
                                        value={appState.positioningData.icp_desired_business_value || ''}
                                        onChange={(e) => setAppState(prev => ({ ...prev, positioningData: { ...prev.positioningData, icp_desired_business_value: e.target.value } }))}
                                    />
                                </div>
                                <div>
                                    <label className="block font-bold text-gray-700">Problem Urgency</label>
                                    <p className="text-sm text-gray-500 mb-2">Why do they need to solve this problem *now*?</p>
                                    <textarea 
                                        className="w-full mt-1 p-2 border border-gray-300 rounded-md"
                                        rows="3" 
                                        placeholder="Example: The migration is a board-level priority for this fiscal year. Any delay directly impacts our ability to scale and report earnings accurately."
                                        value={appState.positioningData.icp_problem_urgency || ''}
                                        onChange={(e) => setAppState(prev => ({ ...prev, positioningData: { ...prev.positioningData, icp_problem_urgency: e.target.value } }))}
                                    />
                                </div>
                                <div>
                                    <label className="block font-bold text-gray-700">Quick Decision Making</label>
                                    <p className="text-sm text-gray-500 mb-2">Who is the economic buyer and can they approve the purchase efficiently?</p>
                                    <textarea 
                                        className="w-full mt-1 p-2 border border-gray-300 rounded-md"
                                        rows="3" 
                                        placeholder="Example: The VP of Finance is the economic buyer. They have budget authority up to $250k for transformation projects and can sign off without a lengthy committee review."
                                        value={appState.positioningData.icp_quick_decision_making || ''}
                                        onChange={(e) => setAppState(prev => ({ ...prev, positioningData: { ...prev.positioningData, icp_quick_decision_making: e.target.value } }))}
                                    />
                                </div>
                                <div>
                                    <label className="block font-bold text-gray-700">Prioritized Requirements</label>
                                    <p className="text-sm text-gray-500 mb-2">What do they value most in a solution for this problem?</p>
                                    <textarea 
                                        className="w-full mt-1 p-2 border border-gray-300 rounded-md"
                                        rows="3" 
                                        placeholder="Example: Speed-to-insight is #1. We cannot wait 6 months for consultants. #2 is accuracy; the data must be audit-grade. #3 is ease of use for our internal team."
                                        value={appState.positioningData.icp_prioritized_requirements || ''}
                                        onChange={(e) => setAppState(prev => ({ ...prev, positioningData: { ...prev.positioningData, icp_prioritized_requirements: e.target.value } }))}
                                    />
                                </div>
                                <div>
                                    <label className="block font-bold text-gray-700">Willingness to Pay</label>
                                    <p className="text-sm text-gray-500 mb-2">What is their budget and value perception for a solution like this?</p>
                                    <textarea 
                                        className="w-full mt-1 p-2 border border-gray-300 rounded-md"
                                        rows="3" 
                                        placeholder="Example: They've already budgeted $1M for consultants, so they perceive high value in a tech solution that can deliver better results for a fraction of that cost. Willing to pay $150k-$200k for a solution that guarantees success."
                                        value={appState.positioningData.icp_willingness_to_pay || ''}
                                        onChange={(e) => setAppState(prev => ({ ...prev, positioningData: { ...prev.positioningData, icp_willingness_to_pay: e.target.value } }))}
                                    />
                                </div>
                                <div>
                                    <label className="block font-bold text-gray-700">Implementation Readiness</label>
                                    <p className="text-sm text-gray-500 mb-2">Can they adopt and get value from the product today?</p>
                                    <textarea 
                                        className="w-full mt-1 p-2 border border-gray-300 rounded-md"
                                        rows="3" 
                                        placeholder="Example: They have a dedicated transformation team ready to start. All relevant contracts and process documents are digitized and accessible."
                                        value={appState.positioningData.icp_implementation_readiness || ''}
                                        onChange={(e) => setAppState(prev => ({ ...prev, positioningData: { ...prev.positioningData, icp_implementation_readiness: e.target.value } }))}
                                    />
                                </div>
                                <div>
                                    <label className="block font-bold text-gray-700">Firmographic</label>
                                    <p className="text-sm text-gray-500 mb-2">What are the key company attributes (size, industry, revenue)?</p>
                                    <textarea 
                                        className="w-full mt-1 p-2 border border-gray-300 rounded-md"
                                        rows="3" 
                                        placeholder="Example: Publicly traded B2B SaaS company, >$1B in annual revenue, 2000+ employees. Headquartered in North America."
                                        value={appState.positioningData.icp_firmographic || ''}
                                        onChange={(e) => setAppState(prev => ({ ...prev, positioningData: { ...prev.positioningData, icp_firmographic: e.target.value } }))}
                                    />
                                </div>
                                <div>
                                    <label className="block font-bold text-gray-700">Technographic</label>
                                    <p className="text-sm text-gray-500 mb-2">What is their current technology stack?</p>
                                    <textarea 
                                        className="w-full mt-1 p-2 border border-gray-300 rounded-md"
                                        rows="3" 
                                        placeholder="Example: Currently using NetSuite, Salesforce, and Coupa. Moving to Oracle Fusion. Internal BI uses Tableau."
                                        value={appState.positioningData.icp_technographic || ''}
                                        onChange={(e) => setAppState(prev => ({ ...prev, positioningData: { ...prev.positioningData, icp_technographic: e.target.value } }))}
                                    />
                                </div>
                                <div>
                                    <label className="block font-bold text-gray-700">Behavioral</label>
                                    <p className="text-sm text-gray-500 mb-2">How do they act, buy, and use technology?</p>
                                    <textarea 
                                        className="w-full mt-1 p-2 border border-gray-300 rounded-md"
                                        rows="3" 
                                        placeholder="Example: They are early adopters of AI technology in their finance stack. They prefer to buy best-of-breed solutions over suite extensions. They have a history of successful, large-scale software implementations."
                                        value={appState.positioningData.icp_behavioral || ''}
                                        onChange={(e) => setAppState(prev => ({ ...prev, positioningData: { ...prev.positioningData, icp_behavioral: e.target.value } }))}
                                    />
                                </div>
                            </div>
                        </div>

                        <div id="section-2" className="bg-white p-8 rounded-lg shadow-md scroll-mt-24">
                            <h2 className="text-2xl font-bold scale-green-text mb-2">2. Competitive Alternatives</h2>
                            <div className="space-y-4">
                                {(appState.positioningData.alternatives || []).map((item, index) => (
                                    <RemovableRow 
                                        key={index}
                                        index={index}
                                        item={item}
                                        onUpdate={(idx, key, value) => updateNestedValue('alternatives', idx, key, value)}
                                        onRemove={(idx) => removeItem('alternatives', idx)}
                                        placeholder1="Alternative"
                                        placeholder2="Why it's inadequate"
                                    />
                                ))}
                                <button 
                                    onClick={() => addItem('alternatives', { val1: '', val2: '' })}
                                    className="text-sm scale-green-bg text-white font-bold py-2 px-3 rounded-lg hover:bg-opacity-90"
                                >
                                    + Add Alternative
                                </button>
                            </div>
                        </div>

                        <div id="section-4" className="bg-white p-8 rounded-lg shadow-md scroll-mt-24">
                            <h2 className="text-2xl font-bold scale-green-text mb-2">4. Value and Proof</h2>
                            <div className="space-y-4">
                                {(appState.positioningData.values || []).map((item, index) => (
                                    <RemovableTriple 
                                        key={index}
                                        index={index}
                                        item={item}
                                        onUpdate={(idx, key, value) => updateNestedValue('values', idx, key, value)}
                                        onRemove={(idx) => removeItem('values', idx)}
                                    />
                                ))}
                                <button 
                                    onClick={() => addItem('values', { val1: '', val2: '', val3: '' })}
                                    className="text-sm scale-green-bg text-white font-bold py-2 px-3 rounded-lg hover:bg-opacity-90"
                                >
                                    + Add Value Point
                                </button>
                            </div>
                        </div>

                        <div id="section-7" className="bg-white p-8 rounded-lg shadow-md scroll-mt-24">
                            <h2 className="text-2xl font-bold scale-green-text mb-2">7. Relevant Trends</h2>
                            <p className="font-semibold text-gray-600 mb-2">Question: What macro trends create urgency for our solution *right now*?</p>
                            <p className="text-gray-600 mb-6">Guidance: Tying your solution to an undeniable trend creates urgency.</p>
                            <div className="space-y-6">
                                <div>
                                    <label className="block font-bold text-gray-700">Industry Trend 1</label>
                                    <textarea 
                                        className="w-full mt-1 p-2 border border-gray-300 rounded-md"
                                        rows="2" 
                                        placeholder="How this trend aligns with and enhances your product"
                                        value={appState.positioningData.trend1_desc || ''}
                                        onChange={(e) => setAppState(prev => ({ ...prev, positioningData: { ...prev.positioningData, trend1_desc: e.target.value } }))}
                                    />
                                </div>
                                <div>
                                    <label className="block font-bold text-gray-700">Industry Trend 2</label>
                                    <textarea 
                                        className="w-full mt-1 p-2 border border-gray-300 rounded-md"
                                        rows="2" 
                                        placeholder="How this trend makes your product more appealing"
                                        value={appState.positioningData.trend2_desc || ''}
                                        onChange={(e) => setAppState(prev => ({ ...prev, positioningData: { ...prev.positioningData, trend2_desc: e.target.value } }))}
                                    />
                                </div>
                                <div>
                                    <label className="block font-bold text-gray-700">Industry Trend 3 (Optional)</label>
                                    <textarea 
                                        className="w-full mt-1 p-2 border border-gray-300 rounded-md"
                                        rows="2" 
                                        placeholder="How this trend creates urgency for your product"
                                        value={appState.positioningData.trend3_desc || ''}
                                        onChange={(e) => setAppState(prev => ({ ...prev, positioningData: { ...prev.positioningData, trend3_desc: e.target.value } }))}
                                    />
                                </div>
                                <div>
                                    <label className="block font-bold text-gray-700">Industry Trend 4 (Optional)</label>
                                    <textarea 
                                        className="w-full mt-1 p-2 border border-gray-300 rounded-md"
                                        rows="2" 
                                        placeholder="How this trend impacts the need for your product"
                                        value={appState.positioningData.trend4_desc || ''}
                                        onChange={(e) => setAppState(prev => ({ ...prev, positioningData: { ...prev.positioningData, trend4_desc: e.target.value } }))}
                                    />
                                </div>
                            </div>
                        </div>

                        <div className="text-center mt-12 pb-24">
                            <button 
                                onClick={() => onNavigate('category')}
                                className="scale-gold-bg text-white font-bold py-4 px-8 rounded-lg hover:bg-opacity-90 text-lg"
                            >
                                Continue to Part 2: Category Design →
                            </button>
                        </div>
                                </div>
                            </main>
                        </div>
                    </div>

                    <ExportModal 
                        isOpen={exportModal.isOpen}
                        onClose={() => setExportModal(prev => ({ ...prev, isOpen: false }))}
                        title={exportModal.title}
                        content={exportModal.content}
                        appState={appState}
                        filename="positioning-blueprint"
                    />
                </div>
            );
        };

        // CategoryDesignTool Component
        const CategoryDesignTool = ({ appState, setAppState, onNavigate }) => {
            const [exportModal, setExportModal] = useState({ isOpen: false, content: '', title: '' });
            const [showSuggestions, setShowSuggestions] = useState(false);
            const [isLoadingNames, setIsLoadingNames] = useState(false);
            const [suggestedNames, setSuggestedNames] = useState([]);
            
            // Simulate AI API call for category name generation
            const simulateAIBrainstorming = async (context) => {
                // Construct prompt based on strategic inputs
                const { icpSummary, valueProps, fromStatement, toStatement } = context;
                
                // Simulate network delay
                await new Promise(resolve => setTimeout(resolve, 1500));
                
                // Generate contextually relevant names based on inputs
                // In a real implementation, this would call an AI API
                const baseNames = [
                    'Revenue Process Automation',
                    'Predictive Market-Fit', 
                    'Continuous Value Alignment',
                    'Intelligent Growth Operations',
                    'Adaptive Business Intelligence',
                    'Strategic Orchestration Platform'
                ];
                
                // If we have good context, return more tailored names
                if (fromStatement && toStatement) {
                    return baseNames.slice(0, 5);
                }
                
                // Fallback to generic names if context is limited
                return [
                    'Digital Transformation Platform',
                    'Business Intelligence Suite',
                    'Operational Excellence System',
                    'Market Innovation Engine',
                    'Growth Acceleration Framework'
                ];
            };

            const handleExport = () => {
                const formatSection = (title, content) => `## ${title}\n${content || 'N/A'}\n\n`;
                
                let summary = `Part 2: Category Design Blueprint\n==================================\n\n`;
                summary += `## Positioning Foundation (from Part 1)\n`;
                summary += `- ICP Summary: ${appState.positioningData.icp_summary || 'N/A'}\n`;
                summary += `- Unique Value: ${appState.positioningData.values ? appState.positioningData.values.map(v => v.val2).join('; ') : 'N/A'}\n\n`;

                summary += `## 8. The Point of View (From/To)\n- From: ${appState.categoryData['from-statement'] || 'N/A'}\n- To: ${appState.categoryData['to-statement'] || 'N/A'}\n\n`;
                summary += formatSection('9. The New Opportunity', appState.categoryData['new-opportunity']);
                summary += `## 10. Category Name & Definition\n- Name: ${appState.categoryData['category-name'] || 'N/A'}\n- Definition: ${appState.categoryData['category-definition'] || 'N/A'}\n\n`;
                summary += formatSection('11. The Manifesto', appState.categoryData['manifesto']);

                setExportModal({ isOpen: true, content: summary, title: 'Category Design Summary' });
            };

            return (
                <div className="container mx-auto px-4 sm:px-6 lg:px-8">
                    <header className="sticky-header">
                        <div className="flex justify-between items-center py-3">
                            <div className="flex items-center space-x-4">
                                <button onClick={() => onNavigate('home')} className="text-gray-600 hover:scale-gold-text">← Back to Home</button>
                                <h1 className="text-xl sm:text-2xl font-bold scale-green-text">Part 2: Category Design</h1>
                            </div>
                            <div className="flex items-center space-x-2">
                                <button
                                    onClick={() => {
                                        if (window.confirm("Are you sure you want to reset all data for Part 2? This will clear all Category Design fields.")) {
                                            setAppState(prev => ({
                                                ...prev,
                                                categoryData: getInitialState().categoryData
                                            }));
                                        }
                                    }}
                                    className="bg-gray-200 text-gray-700 font-semibold py-2 px-4 rounded-lg hover:bg-gray-300 text-sm"
                                >
                                    Reset
                                </button>
                                <button onClick={handleExport} className="scale-green-bg text-white font-bold py-2 px-4 rounded-lg hover:bg-opacity-90">Export</button>
                            </div>
                        </div>
                    </header>

                    <div className="mt-8">
                        <div className="lg:flex lg:space-x-8">
                            <nav className="hidden lg:block w-1/4 sticky top-28 self-start">
                                <div className="bg-white p-4 rounded-lg shadow-md">
                                    <h3 className="font-bold scale-green-text mb-2 text-lg">Sections</h3>
                                    <ul className="space-y-1">
                                        <li><a href="#section-8" className="nav-link block p-2 rounded text-gray-700 font-semibold">8. The Point of View</a></li>
                                        <li><a href="#section-9" className="nav-link block p-2 rounded text-gray-700 font-semibold">9. The New Opportunity</a></li>
                                        <li><a href="#section-10" className="nav-link block p-2 rounded text-gray-700 font-semibold">10. Category Name</a></li>
                                        <li><a href="#section-11" className="nav-link block p-2 rounded text-gray-700 font-semibold">11. The Manifesto</a></li>
                                    </ul>
                                    <div className="mt-4 pt-4 border-t">
                                        <button onClick={() => onNavigate('positioning')} className="text-sm text-gray-600 hover:scale-gold-text font-semibold w-full text-left">
                                            ← Back to Part 1
                                        </button>
                                    </div>
                                </div>
                            </nav>

                            <main className="w-full lg:w-3/4">
                                <div className="space-y-8">
                        <div className="bg-green-50 border-l-4 border-green-600 p-6 rounded-r-lg shadow-sm">
                            <h3 className="text-xl font-bold text-green-800 mb-3">Positioning Foundation</h3>
                            <p className="text-green-700 mb-4">This category design exercise builds upon the positioning work from Part 1. Here is a summary of your key inputs:</p>
                            <div className="bg-white p-4 rounded-md border border-green-200">
                                <h4 className="font-bold text-gray-800">Ideal Customer Profile (Summary)</h4>
                                <p className="text-sm text-gray-600 mt-1 italic">{appState.positioningData.icp_summary || 'Complete Part 1 first'}</p>
                                <h4 className="font-bold text-gray-800 mt-3">Unique Value</h4>
                                <div className="text-sm text-gray-600 mt-1">
                                    {(appState.positioningData.values && appState.positioningData.values[0]?.val1) ? (
                                        <ul className="list-disc pl-5 space-y-2">
                                            {appState.positioningData.values.map((item, index) => (
                                                item.val1 && <li key={index}><strong>{item.val1}:</strong> <span className="italic">{item.val3}</span></li>
                                            ))}
                                        </ul>
                                    ) : (
                                        <span className="italic">Complete Part 1 first</span>
                                    )}
                                </div>
                            </div>
                        </div>

                        <div id="section-8" className="bg-white p-8 rounded-lg shadow-md scroll-mt-24">
                            <h2 className="text-2xl font-bold scale-green-text mb-2">8. The Point of View (The "From/To" Shift)</h2>
                            <p className="font-semibold text-gray-600 mb-2">Question: What is the old, broken way of thinking, and what is our new, better way?</p>
                            <div className="grid grid-cols-1 md:grid-cols-2 gap-6">
                                <div>
                                    <label className="block font-bold text-gray-700">From (The Old, Broken Way)</label>
                                    <textarea 
                                        className="w-full mt-1 p-2 border border-gray-300 rounded-md"
                                        rows="4" 
                                        placeholder="Example: Business transformation is a series of slow, high-risk, episodic projects."
                                        value={appState.categoryData['from-statement'] || ''}
                                        onChange={(e) => setAppState(prev => ({ ...prev, categoryData: { ...prev.categoryData, 'from-statement': e.target.value } }))}
                                    />
                                </div>
                                <div>
                                    <label className="block font-bold text-gray-700">To (Our New, Better Way)</label>
                                    <textarea 
                                        className="w-full mt-1 p-2 border border-gray-300 rounded-md"
                                        rows="4" 
                                        placeholder="Example: Operational excellence is a continuous, automated, data-driven business function."
                                        value={appState.categoryData['to-statement'] || ''}
                                        onChange={(e) => setAppState(prev => ({ ...prev, categoryData: { ...prev.categoryData, 'to-statement': e.target.value } }))}
                                    />
                                </div>
                            </div>
                        </div>

                        <div id="section-9" className="bg-white p-8 rounded-lg shadow-md scroll-mt-24">
                            <h2 className="text-2xl font-bold scale-green-text mb-2">9. The New Opportunity</h2>
                            <p className="font-semibold text-gray-600 mb-2">Question: What becomes possible for businesses that adopt our point of view?</p>
                            <textarea 
                                className="w-full mt-1 p-2 border border-gray-300 rounded-md"
                                rows="4" 
                                placeholder="Example: Businesses can now move beyond reactive, crisis-driven change and achieve continuous transformation..."
                                value={appState.categoryData['new-opportunity'] || ''}
                                onChange={(e) => setAppState(prev => ({ ...prev, categoryData: { ...prev.categoryData, 'new-opportunity': e.target.value } }))}
                            />
                        </div>

                        <div id="section-10" className="bg-white p-8 rounded-lg shadow-md scroll-mt-24">
                            <h2 className="text-2xl font-bold scale-green-text mb-2">10. Category Name & Definition</h2>
                            <div className="space-y-4">
                                <div>
                                    <label className="block font-bold text-gray-700">Category Name</label>
                                    <div className="flex gap-2 mt-1">
                                        <input 
                                            type="text" 
                                            className="flex-1 p-2 border border-gray-300 rounded-md"
                                            placeholder="Example: Continuous Transformation"
                                            value={appState.categoryData['category-name'] || ''}
                                            onChange={(e) => setAppState(prev => ({ ...prev, categoryData: { ...prev.categoryData, 'category-name': e.target.value } }))}
                                        />
                                        <button 
                                            className="px-4 py-2 text-white font-bold rounded-md transition-colors hover:opacity-90 disabled:opacity-50"
                                            style={{backgroundColor: '#224f41'}}
                                            onClick={async () => {
                                                // Gather strategic inputs from appState
                                                const icpSummary = appState.positioningData.icp_summary || '';
                                                const valueProps = appState.positioningData.values 
                                                    ? appState.positioningData.values
                                                        .filter(v => v.val3)
                                                        .map(v => v.val3)
                                                    : [];
                                                const fromStatement = appState.categoryData['from-statement'] || '';
                                                const toStatement = appState.categoryData['to-statement'] || '';
                                                
                                                // Construct context for AI
                                                const context = {
                                                    icpSummary,
                                                    valueProps,
                                                    fromStatement,
                                                    toStatement
                                                };
                                                
                                                // Show loading state
                                                setShowSuggestions(true);
                                                setIsLoadingNames(true);
                                                
                                                try {
                                                    // Simulate AI API call
                                                    const names = await simulateAIBrainstorming(context);
                                                    setSuggestedNames(names);
                                                } catch (error) {
                                                    console.error('Failed to generate names:', error);
                                                    setSuggestedNames(['Error generating names']);
                                                } finally {
                                                    setIsLoadingNames(false);
                                                }
                                            }}
                                            disabled={isLoadingNames}
                                        >
                                            {isLoadingNames ? 'Brainstorming...' : 'Brainstorm with AI'}
                                        </button>
                                    </div>
                                    {showSuggestions && (
                                        <div className="mt-2 p-3 bg-gray-50 border border-gray-200 rounded-md">
                                            {isLoadingNames ? (
                                                <p className="text-sm text-gray-600 italic">Analyzing your strategic context and generating category names...</p>
                                            ) : (
                                                <>
                                                    <p className="text-sm font-medium text-gray-700 mb-2">Select a category name:</p>
                                                    <div className="space-y-1">
                                                        {suggestedNames.map((name, index) => (
                                                    <button
                                                        key={index}
                                                        className="block w-full text-left px-3 py-2 text-sm rounded-md hover:bg-gray-100 transition-colors"
                                                        onClick={() => {
                                                            setAppState(prev => ({ 
                                                                ...prev, 
                                                                categoryData: { 
                                                                    ...prev.categoryData, 
                                                                    'category-name': name 
                                                                } 
                                                            }));
                                                            setShowSuggestions(false);
                                                        }}
                                                    >
                                                        {name}
                                                    </button>
                                                ))}
                                                    </div>
                                                </>
                                            )}
                                        </div>
                                    )}
                                </div>
                                <div>
                                    <label className="block font-bold text-gray-700">One-Sentence Definition</label>
                                    <input 
                                        type="text" 
                                        className="w-full mt-1 p-2 border border-gray-300 rounded-md"
                                        placeholder="Example: The practice of using AI to continuously analyze and optimize business processes in real-time."
                                        value={appState.categoryData['category-definition'] || ''}
                                        onChange={(e) => setAppState(prev => ({ ...prev, categoryData: { ...prev.categoryData, 'category-definition': e.target.value } }))}
                                    />
                                </div>
                            </div>
                        </div>

                        <div id="section-11" className="bg-white p-8 rounded-lg shadow-md scroll-mt-24">
                            <h2 className="text-2xl font-bold scale-green-text mb-2">11. The Manifesto</h2>
                            <p className="font-semibold text-gray-600 mb-2">Question: What is our story?</p>
                            <textarea 
                                className="w-full mt-1 p-2 border border-gray-300 rounded-md"
                                rows="8" 
                                placeholder="Enter your manifesto here..."
                                value={appState.categoryData['manifesto'] || ''}
                                onChange={(e) => setAppState(prev => ({ ...prev, categoryData: { ...prev.categoryData, 'manifesto': e.target.value } }))}
                            />
                        </div>
                                </div>
                            </main>
                        </div>
                    </div>

                    <ExportModal 
                        isOpen={exportModal.isOpen}
                        onClose={() => setExportModal(prev => ({ ...prev, isOpen: false }))}
                        title={exportModal.title}
                        content={exportModal.content}
                        appState={appState}
                        filename="category-design-blueprint"
                    />
                </div>
            );
        };

        // Main App Component
        const App = () => {
            const [appState, setAppState] = useState(() => {
                const savedState = loadAppState();
                return savedState || getInitialState();
            });

            useEffect(() => {
                saveAppState(appState);
            }, [appState]);

            const navigate = (view) => {
                setAppState(prev => ({ ...prev, currentView: view }));
            };

            const renderCurrentView = () => {
                switch (appState.currentView) {
                    case 'positioning':
                        return <PositioningTool appState={appState} setAppState={setAppState} onNavigate={navigate} />;
                    case 'category':
                        return <CategoryDesignTool appState={appState} setAppState={setAppState} onNavigate={navigate} />;
                    default:
                        return <Home onNavigate={navigate} />;
                }
            };

            return <div>{renderCurrentView()}</div>;
        };

        // Render the app
        ReactDOM.render(<App />, document.getElementById('root'));
    </script>
</body>
</html>